<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì—¬í–‰ ì•ˆë‚´ ê²Œì‹œíŒ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .controls { margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; background-color: #f9f9f9; }
        .post-item { border-bottom: 1px solid #eee; padding: 10px 0; }
        .post-title a { text-decoration: none; color: #007bff; font-weight: bold; }
        button, select { padding: 8px 15px; margin-right: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>ğŸŒ ì—¬í–‰ ì•ˆë‚´ ê²Œì‹œíŒ</h1>

    <div class="controls">
        <h3>ğŸ” ì—¬í–‰ì§€ ê²€ìƒ‰ ë° í•„í„°ë§</h3>
        
        <label for="continentSelect">ëŒ€ë¥™ ì„ íƒ:</label>
        <select id="continentSelect">
            <option value="">-- ì „ì²´ ëŒ€ë¥™ --</option>
            <option th:each="cont : ${continents}" 
                    th:value="${cont.continentId}" 
                    th:text="${cont.name}"></option>
        </select>
        
        <label for="tagSelect">íƒœê·¸ ì„ íƒ:</label>
        <select id="tagSelect">
            <option value="">-- ì „ì²´ íƒœê·¸ --</option>
            <option th:each="tag : ${tags}" 
                    th:value="${tag.tagId}" 
                    th:text="${tag.name}"></option>
        </select>

        <a th:href="@{/posts/new}">
            <button type="button" class="btn-primary">ğŸ“ ì—¬í–‰ ì•ˆë‚´ ì‘ì„±</button>
        </a>
        
        <button onclick="applyFilter()">í•„í„° ì ìš©</button>
    </div>

    <hr>

    <h2>ìµœì‹  ê²Œì‹œê¸€</h2>
    <div th:if="${posts != null and !posts.isEmpty()}">
        <div th:each="post : ${posts}" class="post-item">
            <div class="post-title">
                <a th:href="@{/posts/{id}(id=${post.postId})}" th:text="${post.title}">ê²Œì‹œê¸€ ì œëª©</a> 
                <span th:text="| [${post.countryName}, ${post.tagNamesStr}] |" style="font-size: 0.9em; color: gray;">[ë‚˜ë¼ ì´ë¦„,íƒœê·¸]</span>
                <span th:text="| ì‘ì„±ì: ${post.author} |" style="float: right;"></span>
            </div>
        </div>
    </div>
    <div th:if="${posts == null or posts.isEmpty()}">
        <p>ì•„ì§ ì‘ì„±ëœ ì—¬í–‰ ì•ˆë‚´ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
    </div>

    <script>
        function applyFilter() {
            const continentId = document.getElementById('continentSelect').value;
            const tagId = document.getElementById('tagSelect').value;
            
            // ğŸ’¡ ì‹¤ì œ í•„í„°ë§ ë¡œì§: JavaScriptë¡œ ì„ íƒëœ ê°’ì„ ê°€ì ¸ì™€ ì„œë²„ì— ìƒˆ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
            let url = '/posts?';
            if (continentId) {
                url += 'continentId=' + continentId + '&';
            }
            if (tagId) {
                url += 'tagId=' + tagId;
            }
            window.location.href = url.replace(/&$/, ''); // ëì˜ & ì œê±° í›„ ì´ë™
        }
    </script>

</body>
</html>